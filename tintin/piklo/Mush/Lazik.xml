<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE muclient>
<!-- Saved on Saturday, June 28, 2003, 6:18 PM -->
<!-- MuClient version 3.42 -->

<!-- Plugin "Lazik" generated by Plugin Wizard -->

<muclient>
<plugin
   name="Lazik"
   author="Lisev"
   id="c3b5a044b1738630ec0378e6"
   language="VBscript"
   save_state="y"
   date_written="2003-06-28 18:15:30"
   requires="3.42"
   version="1.0"
   >
<description trim="y">
<![CDATA[
Bieg [opoznienie] [kierunek] [ie lokacji]
]]>
</description>

</plugin>

<!--  Triggers  -->

<triggers>
  <trigger
   custom_colour="1"
   enabled="y"
   group="lazik"
   make_bold="y"
   match="dwa widoczne wyjscia: ([^ ]*) i ([^ ]*)\."
   regexp="y"
   script="OnBieg"
   sequence="49"
   other_text_colour="black"
   other_back_colour="black"
  >
  </trigger>
  
  <trigger
   custom_colour="1"
   enabled="y"
   group="lazik"
   make_bold="y"
   match="Trakt wiedzie na ([^ ]*) i ([^ ]*)\."
   regexp="y"
   script="OnBieg"
   sequence="49"
   other_text_colour="black"
   other_back_colour="black"
  >
  </trigger>
  <trigger
   custom_colour="1"
   enabled="y"
   group="lazik"
   make_bold="y"
   match="W gestych ciemnosciach dostrzegasz trakt wiodacy na ([^ ]*) i ([^ ]*)\."
   regexp="y"
   script="OnBieg"
   sequence="49"
   other_text_colour="black"
   other_back_colour="black"
  >
  </trigger>
  
  <trigger
   custom_colour="1"
   enabled="y"
   group="lazik"
   make_bold="y"
   match="W gestych ciemnosciach dostrzegasz tunel wiodacy na ([^ ]*) i ([^ ]*)\."
   regexp="y"
   script="OnBieg"
   sequence="49"
   other_text_colour="black"
   other_back_colour="black"
  >
  </trigger>
  
  <trigger
   enabled="y"
   group="lazik"
   match="Nie widzisz zadnego wyjscia prowadzacego"
   regexp="y"
   script="OnBiegZlyKierunek"
   sequence="49"
   other_text_colour="black"
   other_back_colour="black"
  >
  </trigger>
  <trigger
   custom_colour="1"
   enabled="y"
   group="lazik"
   make_bold="y"
   match="([^ ]*) widocz(ne|nych) wyjsc(ia|ie|): (.*)\."
   regexp="y"
   script="OnBiegAutoOff"
   sequence="50"
   other_text_colour="black"
   other_back_colour="black"
  >
  </trigger>
  <trigger
   custom_colour="1"
   enabled="y"
   group="lazik"
   make_bold="y"
   match="Trakt rozgalezia sie na (.*?)\.$"
   regexp="y"
   script="OnBiegAutoOff"
   sequence="50"
   other_text_colour="black"
   other_back_colour="black"
  >
  </trigger>
  <trigger
   custom_colour="1"
   enabled="y"
   group="lazik"
   make_bold="y"
   match="W gestych ciemnosciach dostrzegasz, ze trakt rozgalezia sie na (.*?)\.$"
   regexp="y"
   script="OnBiegAutoOff"
   sequence="50"
   other_text_colour="black"
   other_back_colour="black"
  >
  </trigger>
  
</triggers>

<!--  Aliases  -->

<aliases>
  <alias
   script="OnBiegStartZOpoznieniemPlusLokacje"
   match="^bieg ([0-9]+) ([^ ]*) ([0-9]+)$"
   enabled="y"
   group="lazik"
   regexp="y"
  >
  </alias>
  <alias
   script="OnMoveSetLokacja"
   match="^(przemknij |przemknij z druzyna na |)(w|zachod|nw|polnocny\-zachod|n|polnoc|ne|polnocny\-wschod|e|wschod|se|poludniowy\-wschod|s|poludnie|sw|poludniowy\-zachod|u|gora|d|dol)$"
   enabled="y"
   keep_evaluating="y"
   group="lazik"
   regexp="y"
  >
  </alias>
  <alias
   script="OnBiegStartZOpoznieniem"
   match="^bieg ([0-9]+) ([^ ]*)$"
   enabled="y"
   group="lazik"
   regexp="y"
  >
  </alias>
  <alias
   script="OnBiegIloscLokacji"
   match="^bieg ([^ ]*) ([0-9]+)$"
   enabled="y"
   group="lazik"
   regexp="y"
  >
  </alias>
  <alias
   script="OnBiegStart"
   match="^bieg ([^ ]*)$"
   enabled="y"
   group="lazik"
   regexp="y"
  >
  </alias>
  <alias
   script="help_script"
   match="^script_help$"
   enabled="y"
   group="script_help"
   omit_from_command_history="y"
   regexp="y"
   keep_evaluating="y"
   sequence="0"
  >
  </alias>
  <alias
   script="OnBiegOnKlawisz"
   match="^bieg_by_klawisz$"
   enabled="y"
   group="lazik"
   regexp="y"
  >
  </alias>
  <alias
   script="OnBiegOff"
   match="^bieg$"
   enabled="y"
   group="lazik"
   regexp="y"
  >
  </alias>
</aliases>

<!--  Variables  -->

<variables>
  <variable name="bieg_ile_biegniemy">-1</variable>
  <variable name="bieg_pomoc"></variable>
  <variable name="bieg_zapierdalamy">off</variable>
  <variable name="bieg_opoznienie">0</variable>
  <variable name="bieg_skad"></variable>
  <variable name="bieg_ile_przebieglem">0</variable>
</variables>

<!--  Script  -->

<script>
<![CDATA[

'----------------------------------------------------
'autobieg
'----------------------------------------------------
sub pokaz_sciezke
'world.note "Sciezka: " & world.getvariable("bieg_sciezka")
end sub

sub OnBiegAutoOff(strtriggername, stroutput, arrwildcards)
 if world.getvariable("bieg_zapierdalamy") = "on" then
  world.setvariable "bieg_zapierdalamy", "off"
  world.setvariable "bieg_skad", ""
  world.setvariable "bieg_opoznienie", 0
  world.deletetimer "bieg_opoznienie"  
  pokaz_sciezke
  world.note "Wybierz kierunek"
  
 exit sub
 end if
end sub

sub OnBiegOff(straliasname, stroutput, arrwildcards)
 if world.getvariable("bieg_zapierdalamy") = "off" then
  world.note "Przeciez nie biegniesz"
  exit sub
 end if
 world.setvariable "bieg_zapierdalamy", "off"
 world.setvariable "bieg_skad", ""
 world.setvariable "bieg_ile_biegniemy", -1
 world.setvariable "bieg_opoznienie", 0 
 world.deletetimer "bieg_opoznienie"
 world.note "Przestajesz biec"
 pokaz_sciezke
end sub

sub Timer_Move(timer)
  world.execute world.getvariable("timer_move")
  world.setvariable "timer_move", ""
end sub

sub OnBiegStart(straliasname, stroutput, arrwildcards)
 dim gdzie
 dim pomoc
 if world.getvariable("bieg_zapierdalamy") = "on" then
  world.note "Przeciez juz biegniesz"
  exit sub
 end if
 gdzie = arrwildcards(1)
 select case gdzie
     Case "polnoc" pomoc = "poludnie"
     Case "wschod" pomoc = "zachod"
     Case "poludnie" pomoc = "polnoc"
     Case "zachod" pomoc = "wschod"
     Case "polnocny-zachod" pomoc = "poludniowy-wschod"
     Case "polnocny-wschod" pomoc = "poludniowy-zachod"
     Case "poludniowy-zachod" pomoc = "polnocny-wschod"
     Case "poludniowy-wschod" pomoc = "polnocny-zachod"
     Case "gora" pomoc = "dol"
     Case "dol" pomoc = "gora"
     Case "w" pomoc = "wschod"
     Case "e" pomoc = "zachod"
     Case "s" pomoc = "polnoc"
     Case "n" pomoc = "poludnie"
     Case "nw" pomoc = "poludniowy-wschod"
     Case "ne" pomoc = "poludniowy-zachod"
     Case "sw" pomoc = "polnocny-wschod"
     Case "se" pomoc = "polnocny-zachod"
     Case "u" pomoc = "dol"
     Case "d" pomoc = "gora"     
 End Select 
 if pomoc = "" then
  world.note "Nieznane wyjscie"
  exit sub
 end if
 world.setvariable "bieg_skad", pomoc
 world.setvariable "bieg_zapierdalamy", "on"
 world.setvariable "bieg_opoznienie", 0
 world.setvariable "bieg_sciezka", gdzie & ", "
 world.setvariable "bieg_ile_przebieglem", 0
 world.note "Zaczynamy bieg"
 world.execute gdzie
end sub


sub OnBieg(strtriggername, stroutput, arrwildcards)
 dim exitt
 dim exit1
 dim exit2
 dim pomoc
 if world.getvariable("bieg_zapierdalamy") = "on" then
   world.setvariable "bieg_ile_przebieglem", world.getvariable("bieg_ile_przebieglem") + 1
   exitt = world.getvariable("bieg_skad")
   exit1 = arrwildcards (1)
   exit2 = arrwildcards (2)
   if world.getvariable("bieg_ile_biegniemy") > 0 then
    world.setvariable "bieg_ile_biegniemy", (world.getvariable("bieg_ile_biegniemy") - 1)
   end if
   if world.getvariable("bieg_ile_biegniemy") = 0 then
    world.note "Przebieglismy docelowa ilosc lokacji"
    pokaz_sciezke
    world.setvariable "bieg_zapierdalamy", "off"
    world.setvariable "bieg_pomoc", ""
    world.setvariable "bieg_ile_biegniemy", -1
    exit sub
   end if
   if exitt = "" then
    world.note "Wyjscie nie dodane"
    world.setvariable "bieg_zapierdalamy", "off"
    world.deletetimer "bieg_opoznienie"    
    pokaz_sciezke
    exit sub
   end if
   if exit1 = exitt then

     if world.getvariable("bieg_opoznienie") = 0 then
        world.execute exit2
        else
        world.setvariable "timer_move", exit2
        World.addtimer "bieg_opoznienie", 0, 0, world.getvariable("bieg_opoznienie"), "", 5, "timer_move"
     end if
    world.note "" & world.getvariable("bieg_ile_przebieglem") & " Biegniemy na " & exit2
    world.setvariable "bieg_sciezka", world.getvariable("bieg_sciezka") & exit2 & ", "
   exit sub
   end if
   if exit2 = exitt then
     if world.getvariable("bieg_opoznienie") = 0 then
        world.execute exit1
     else
        world.setvariable "timer_move", exit1
        World.addtimer "bieg_opoznienie", 0, 0, world.getvariable("bieg_opoznienie"), "", 5, "timer_move"
     end if

    world.note "" & world.getvariable("bieg_ile_przebieglem") & " Biegniemy na " & exit1
    world.setvariable "bieg_sciezka", world.getvariable("bieg_sciezka") & exit1 & ", "
   exit sub
   end if
   
 else

   exitt = world.getvariable("bieg_skad")
   exit1 = arrwildcards (1)
   exit2 = arrwildcards (2)

   if exit1 = exitt then
    world.setvariable "bieg_next", exit2
   end if
   if exit2 = exitt then
    world.setvariable "bieg_next", exit1   
   end if
 end if
end sub

sub OnBiegOnKlawisz(alias, output, array)
    dim pomoc
    if len(world.getvariable("bieg_next")) > 0 then
       world.execute world.getvariable("bieg_next")
    end if
    world.setvariable "bieg_next", ""
end sub

sub OnBiegZlyKierunek(strtriggername, stroutput, arrwildcards)
 if world.getvariable("bieg_zapierdalamy") = "on" then
  world.setvariable "bieg_zapierdalamy", "off"
  world.setvariable "bieg_skad", ""
  world.setvariable "bieg_ile_biegniemy", -1
  world.deletetimer "bieg_opoznienie"  
  world.note "Zle wyjscie"
  exit sub
 end if
end sub

sub OnMoveSetLokacja(alias, output, array)
   dim pomoc
    select case array(2)
     Case "n" pomoc = "poludnie"
     Case "e" pomoc = "zachod"
     Case "s" pomoc = "polnoc"
     Case "w" pomoc = "wschod"
     Case "nw" pomoc = "poludniowy-wschod"
     Case "ne" pomoc = "poludniowy-zachod"
     Case "sw" pomoc = "polnocny-wschod"
     Case "se" pomoc = "polnocny-zachod"
     Case "u" pomoc = "dol"
     Case "d" pomoc = "gora"
     Case "polnoc" pomoc = "poludnie"
     Case "wschod" pomoc = "zachod"
     Case "poludnie" pomoc = "polnoc"
     Case "zachod" pomoc = "wschod"
     Case "polnocny-zachod" pomoc = "poludniowy-wschod"
     Case "polnocny-wschod" pomoc = "poludniowy-zachod"
     Case "poludniowy-zachod" pomoc = "polnocny-wschod"
     Case "poludniowy-wschod" pomoc = "polnocny-zachod"
     Case "gora" pomoc = "dol"
     Case "dol" pomoc = "gora"
    End Select
    world.setvariable "bieg_skad", pomoc
end sub

sub OnBiegIloscLokacji(straliasname, stroutput, arrwildcards)
 dim gdzie
 dim pomoc
 if world.getvariable("bieg_zapierdalamy") = "on" then
  world.note "Przeciez juz biegniesz"
  exit sub
 end if
 gdzie = arrwildcards(1)
 select case gdzie
     Case "polnoc" pomoc = "poludnie"
     Case "wschod" pomoc = "zachod"
     Case "poludnie" pomoc = "polnoc"
     Case "zachod" pomoc = "wschod"
     Case "polnocny-zachod" pomoc = "poludniowy-wschod"
     Case "polnocny-wschod" pomoc = "poludniowy-zachod"
     Case "poludniowy-zachod" pomoc = "polnocny-wschod"
     Case "poludniowy-wschod" pomoc = "polnocny-zachod"
     Case "gora" pomoc = "dol"
     Case "dol" pomoc = "gora"
     Case "w" pomoc = "wschod"
     Case "e" pomoc = "zachod"
     Case "s" pomoc = "polnoc"
     Case "n" pomoc = "poludnie"
     Case "nw" pomoc = "poludniowy-wschod"
     Case "ne" pomoc = "poludniowy-zachod"
     Case "sw" pomoc = "polnocny-wschod"
     Case "se" pomoc = "polnocny-zachod"
     Case "u" pomoc = "dol"
     Case "d" pomoc = "gora"     
 End Select 
 if pomoc = "" then
  world.note "Nieznane wyjscie"
  exit sub
 end if
 world.setvariable "bieg_skad", pomoc
 world.setvariable "bieg_zapierdalamy", "on"
 world.note "Zaczynamy bieg"
 world.setvariable "bieg_sciezka", gdzie & ", "
 world.execute gdzie
 world.setvariable "bieg_ile_biegniemy", arrwildcards(2)
 world.setvariable "bieg_opoznienie", 0
 world.setvariable "bieg_ile_przebieglem", 0
end sub

sub OnBiegStartZOpoznieniem(straliasname, stroutput, arrwildcards)
 dim gdzie
 dim pomoc
 if world.getvariable("bieg_zapierdalamy") = "on" then
  world.note "Przeciez juz biegniesz"
  exit sub
 end if
 gdzie = arrwildcards(2)
 select case gdzie
     Case "polnoc" pomoc = "poludnie"
     Case "wschod" pomoc = "zachod"
     Case "poludnie" pomoc = "polnoc"
     Case "zachod" pomoc = "wschod"
     Case "polnocny-zachod" pomoc = "poludniowy-wschod"
     Case "polnocny-wschod" pomoc = "poludniowy-zachod"
     Case "poludniowy-zachod" pomoc = "polnocny-wschod"
     Case "poludniowy-wschod" pomoc = "polnocny-zachod"
     Case "gora" pomoc = "dol"
     Case "dol" pomoc = "gora"
     Case "w" pomoc = "wschod"
     Case "e" pomoc = "zachod"
     Case "s" pomoc = "polnoc"
     Case "n" pomoc = "poludnie"
     Case "nw" pomoc = "poludniowy-wschod"
     Case "ne" pomoc = "poludniowy-zachod"
     Case "sw" pomoc = "polnocny-wschod"
     Case "se" pomoc = "polnocny-zachod"
     Case "u" pomoc = "dol"
     Case "d" pomoc = "gora"     
 End Select 
 if pomoc = "" then
  world.note "Nieznane wyjscie"
  exit sub
 end if
 world.setvariable "bieg_skad", pomoc
 world.setvariable "bieg_zapierdalamy", "on"
 world.note "Zaczynamy bieg"
 world.execute gdzie
 world.setvariable "bieg_opoznienie", arrwildcards(1)
 world.setvariable "bieg_ile_przebieglem", 0
end sub

sub OnBiegStartZOpoznieniemPlusLokacje(straliasname, stroutput, arrwildcards)
 dim gdzie
 dim pomoc
 if world.getvariable("bieg_zapierdalamy") = "on" then
  world.note "Przeciez juz biegniesz"
  exit sub
 end if
 gdzie = arrwildcards(2)
 select case gdzie
     Case "polnoc" pomoc = "poludnie"
     Case "wschod" pomoc = "zachod"
     Case "poludnie" pomoc = "polnoc"
     Case "zachod" pomoc = "wschod"
     Case "polnocny-zachod" pomoc = "poludniowy-wschod"
     Case "polnocny-wschod" pomoc = "poludniowy-zachod"
     Case "poludniowy-zachod" pomoc = "polnocny-wschod"
     Case "poludniowy-wschod" pomoc = "polnocny-zachod"
     Case "gora" pomoc = "dol"
     Case "dol" pomoc = "gora"
     Case "w" pomoc = "wschod"
     Case "e" pomoc = "zachod"
     Case "s" pomoc = "polnoc"
     Case "n" pomoc = "poludnie"
     Case "nw" pomoc = "poludniowy-wschod"
     Case "ne" pomoc = "poludniowy-zachod"
     Case "sw" pomoc = "polnocny-wschod"
     Case "se" pomoc = "polnocny-zachod"
     Case "u" pomoc = "dol"
     Case "d" pomoc = "gora"     
 End Select 
 if pomoc = "" then
  world.note "Nieznane wyjscie"
  exit sub
 end if
 world.setvariable "bieg_skad", pomoc
 world.setvariable "bieg_zapierdalamy", "on"
 world.note "Zaczynamy bieg"
 world.execute gdzie
 world.setvariable "bieg_opoznienie", arrwildcards(1)
 world.setvariable "bieg_ile_biegniemy", arrwildcards(3)
 world.setvariable "bieg_ile_przebieglem", 0
end sub


sub help_script(name, output, array)
    world.note "============================================================"
    world.note "|     Skrypt:                                    Lazik     |"
    world.note "|----------------------------------------------------------|"
    world.note "| Aliasy:                                                  |"
    world.note "|             bieg [opoznienie] [kierunek] [ile_lokacji]   |"
    world.note "|             bieg_by_klawisz                              |"
    world.note "|==========================================================|"
    world.note "| Info:                                                    |"
    world.note "|      * parametry opoznienie i ile lokacji moga zostac    |"
    world.note "|        pominiete. Samo 'bieg' wylacza lazik.             |"
    world.note "|      * bieg_by_klawisz to alias do przejscia jednej      |"
    world.note "|        lokacji                                           |"
    world.note "============================================================"
end sub

]]>
</script>


<!--  Plugin help  -->

<aliases>
  <alias
   script="OnHelp"
   match="Lazik:help"
   enabled="y"
  >
  </alias>
</aliases>

<script>
<![CDATA[
Sub OnHelp (sName, sLine, wildcards)
  world.Note world.GetPluginInfo (world.GetPluginID, 3)
End Sub
]]>
</script> 

</muclient>