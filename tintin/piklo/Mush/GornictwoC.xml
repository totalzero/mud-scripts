<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on poniedzia³ek, wrzesieñ 28, 2015, 7:25  -->
<!-- MuClient version 4.84 -->

<!-- Plugin "Gornictwo" generated by Plugin Wizard -->

<muclient>
<plugin
   name="Gornictwo"
   author="Gnerk"
   id="f6d937e901b4f5b0dd9e6e6f"
   language="VBscript"
   purpose="Gornikowanie kopalni"
   date_written="2015-09-28 19:24:04"
   requires="4.84"
   version="1.0"
   >

</plugin>


<!--  Get our standard constants -->

<include name="constants.vbs"/>

<!--  Triggers  -->

<triggers>
  <trigger
   enabled="y"
   group="Zawal"
   match="^(&gt;\s|)?Krach\! Slyszysz glosny huk\!$"
   regexp="y"
   script="zawal"
   sequence="100"
   sound="C:\Windows\Media\tada.wav"
  >
  </trigger>
  <trigger
   enabled="y"
   group="Zawal"
   match="^(&gt;\s|)?Do twoich uszu dochodzi dzwiek pekniecia\.$"
   regexp="y"
   script="zawal"
   sequence="100"
   sound="C:\Windows\Media\tada.wav"
  >
  </trigger>
  <trigger
   enabled="y"
   group="Zawal"
   match="^(&gt;\s|)?Jedna z podpor komnaty wyglada niepewnie\.$"
   regexp="y"
   script="zawal"
   sequence="100"
   sound="C:\Windows\Media\tada.wav"
  >
  </trigger>
  <trigger
   enabled="y"
   group="Zawal"
   match="^(&gt;\s|)?Elementy zabezpieczenia komnaty uginaja sie mocno\!$"
   regexp="y"
   script="zawal"
   sequence="100"
   sound="C:\Windows\Media\tada.wav"
  >
  </trigger>
  <trigger
   enabled="y"
   group="Zawal"
   match="^(&gt;\s|)?Kraaaaach\!$"
   regexp="y"
   script="zawal"
   sequence="100"
   sound="C:\Windows\Media\tada.wav"
  >
  </trigger>
  <trigger
   enabled="y"
   group="Zawal"
   match="^(&gt;\s|)?Glosny trzask uswiadamia ci\, ze kucie w tej czesci kopalni nie jest juz bezpieczne\!$"
   regexp="y"
   script="zawal"
   sequence="100"
   sound="C:\Windows\Media\tada.wav"
  >
  </trigger>
  <trigger
   group="Gornictwo"
   match="^(.*)Skonczylem kopac$"
   regexp="y"
   sequence="100"
   sound="C:\Windows\Media\tada.wav"
  >
  </trigger>
  <trigger
   group="Gornictwo"
   match="^(&gt;\s|)?Czy widzisz tam jakas sciane\?\!$"
   regexp="y"
   script="badam"
   sequence="100"
  >
  </trigger>
  <trigger
   group="BadaniaSa"
   match="^(&gt;\s|)?Pukasz delikatnie w sciane\, wsluchujac sie w stal (.*)\. Po chwili wylapujesz cichy\, metaliczny dzwiek\, sugerujacy ci\, iz w skale przed toba moga byc jakies wartosciowe mineraly\.$"
   regexp="y"
   script="znalazlem"
   sequence="100"
  >
  </trigger>
  <trigger
   group="Gornictwo"
   match="^(&gt;\s|)?Przestajesz kuc\.$"
   regexp="y"
   script="konieck"
   sequence="100"
  >
  </trigger>
  <trigger
   group="BadaniaSa"
   match="^(&gt;\s|)?Stukasz mloteczkiem (.*) powierzchnie sciany\. Wydobywajacy sie z wnetrza skaly\, intensywny dzwiek informuje cie\, iz gdzies w poblizu znajduje sie zyla cenniejszego kruszcu\.$"
   regexp="y"
   script="znalazlem"
   sequence="100"
  >
  </trigger>
  <trigger
   group="BadaniaSa"
   keep_evaluating="y"
   match="^(&gt;\s|)?Uderzasz nieco mocniej w sciane (.*)\. Po chwili wsluchiwania sie w mdly\, monotonny odglos dochodzisz do wniosku\, iz w tej skale nie ma cennych mineralow\.$"
   regexp="y"
   script="badam"
   sequence="100"
  >
  </trigger>
  <trigger
   group="BadaniaSa"
   match="^(&gt;\s|)?Wsuwasz dziobek (.*) pomiedzy warstwy skalne sciany\, wsluchujac sie w metaliczny dzwiek\. Wysokie tony w twych uszach niosa wspaniala wiesc\, iz jestes blisko wartosciowszych od gruzu mineralow\.$"
   regexp="y"
   script="znalazlem"
   sequence="100"
  >
  </trigger>
  <trigger
   group="BadaniaSa"
   keep_evaluating="y"
   match="^(&gt;\s|)?Nakluwasz delikatnie powierzchnie sciany\, uderzajac w jej wnetrze\. Wydobywajacy sie z wnetrza skaly dzwiek sugeruje\, iz glebiej moga znajdowac sie bryly cenniejszego kruszcu\.$"
   regexp="y"
   script="znalazlem"
   sequence="100"
  >
  </trigger>
  <trigger
   group="Gornictwo"
   match="^(&gt;\s|)?Odczekaj wpierw chwile\. Poprzednia czynnosc zbytnio cie zmeczyla\.$"
   regexp="y"
   script="znalazlem"
   sequence="100"
  >
  </trigger>
  <trigger
   group="BadaniaSa"
   keep_evaluating="y"
   match="^(&gt;\s|)?Opukujesz lekko (.*) sciane\, wsluchujac sie w dzwiek dochodzacy z wnetrza skaly\. Brak metalicznego echa swiadczy\, iz w badanym przez ciebie miejscu nie ma godnych uwagi mineralow\.$"
   regexp="y"
   script="badam"
   sequence="100"
  >
  </trigger>
  <trigger
   group="BadaniaSa"
   match="^(&gt;\s|)?Ostukujesz delikatnie (.*) sciane\, przykladajac ucho do skaly\. Dochodzacy do niego\, metaliczny dzwiek mowi ci\, ze gdzies tutaj musza byc jakies wartosciowe mineraly\.$"
   regexp="y"
   script="znalazlem"
   sequence="100"
  >
  </trigger>
  <trigger
   group="BadaniaSa"
   ignore_case="y"
   keep_evaluating="y"
   match="^(&gt;\s|)?Ostukujesz delikatnie sciane (.*)\, jednakze przytlumione odglosy dochodzace z wnetrza skaly sugeruja ci\, iz nie ma w niej zadnego cennego mineralu\.$"
   regexp="y"
   script="badam"
   sequence="100"
  >
  </trigger>
  <trigger
   group="BadaniaSa"
   match="^(&gt;\s|)?Przesuwasz ostrzem (.*) po powierzchni sciany\, wsluchujac sie z powstajacy dzwiek\. Delikatne\, metaliczne brzmienie daje cien szansy\, iz we wnetrzu skaly znajduja sie cenniejsze mineraly\.$"
   regexp="y"
   script="znalazlem"
   sequence="100"
  >
  </trigger>
  <trigger
   group="Gornictwo"
   match="^(&gt;\s|)?Zaczynasz kuc (.*) sciane\.$"
   regexp="y"
   script="startk"
   sequence="100"
  >
  </trigger>
</triggers>

<!--  Aliases  -->

<aliases>
  <alias
   match="odpal"
   enabled="y"
   sequence="100"
  >
  <send>wyjmij nozyk z pochwy
wez kamien z wora
krzesaj iskry kamieniem o nozyk na lampe
wloz nozyk do pochwy
wloz kamien do wora</send>
  </alias>
  <alias
   script="koniecpracy"
   match="niekop"
   enabled="y"
   group="Kopanie"
   sequence="100"
  >
  </alias>
  <alias
   script="badams"
   match="badaj *"
   enabled="y"
   expand_variables="y"
   group="Kopanie"
   sequence="100"
  >
  </alias>
  <alias
   script="kopanie"
   match="kop *"
   enabled="y"
   group="Kopanie"
   sequence="100"
  >
  </alias>
  <alias
   match="nlo"
   enabled="y"
   sequence="100"
  >
  <send>napelnij lampe olejem</send>
  </alias>
</aliases>

<!--  Timers  -->

<timers>
  <timer name="Czas_Kucia" script="czas_kopania" minute="2" second="0.00" offset_second="0.00" group="Kopanie" >

  </timer>
</timers>

<!--  Script  -->


<script>
<![CDATA[
Dim mineraly,sciana,czas,kopie,rand,ilen
sciana="n"
mineraly=0
ilen=0

Sub koniecpracy(zm1,zm2,zm3)
world.note "Skonczylem kopac"
ilen=0
world.EnableTriggerGroup "Gornictwo", 0
world.EnableTriggerGroup "BadaniaSa", 0
world.EnableTimer "Czas_Kucia", False
world.ResetTimers
world.PlaySound 1, "C:/Windows/Media/tada.wav", vbFalse, 0, 0

End Sub


Sub czas_kopania (Czas_Kucia)

randomize
rand=Int((5) * Rnd + 2)
world.send "przestan kopac"
world.DoAfter rand, "zbadaj "+sciana+ " sciane"
End Sub

Sub badam (zm1,zm2,zm3)
mineraly=0

Select Case sciana
 Case "n"
    sciana="ne"
 Case "ne"
    sciana="e"
 Case "e"
	sciana="se"
 Case "se"
	sciana="s"
 Case "s"
	sciana="sw"
 Case "sw"
	sciana="w"
 Case "w"
	sciana="nw"
 Case "nw"
    sciana="n"
 Case Else
   sciana="n"
End Select
ilen=ilen+1
if ilen>7 then 
call koniecpracy(zm1,zm2,zm3)
else 
world.note "Kopie dalej"
end if
 randomize
rand=Int((1) * Rnd + 1)
world.DoAfter rand, "zbadaj "+sciana+ " sciane"
End sub

Sub badams (zm1,zm2,zm3)
sciana=zm3(1)
world.send ("zbadaj "+sciana+ " sciane")

kopie=0
world.EnableTriggerGroup "Gornictwo", 1
world.EnableTriggerGroup "BadaniaSa", 1
End Sub

Sub znalazlem (zm1,zm2,zm3)
randomize
rand=Int((1) * Rnd + 1)
world.DoAfter rand, "kuj "+sciana+ " sciane"
kopie=1
End Sub

Sub kopanie (zm1,zm2,zm3)
kopie=1
sciana=zm3(1)
randomize
rand=Int((1) * Rnd + 1)
world.DoAfter rand, "kuj "+sciana+ " sciane"
kopie=1
End Sub

Sub startk(zm1,zm2,zm3)
world.EnableTimer "Czas_kucia", TRUE
world.ResetTimers
End Sub

Sub konieck(zm1,zm2,zm3)
world.EnableTimer "Czas_Kucia", FALSE
world.ResetTimers
End sub

Sub zawal(zm1,zm2,zm3)
world.note "ZAWAL"
ilen=0
world.EnableTriggerGroup "Gornictwo", 0
world.EnableTriggerGroup "BadaniaSa", 0
world.EnableTimer "Czas_Kucia", False
world.ResetTimers
world.send("przestan kopac")

End Sub
sub OnPluginInstall()
world.setoption "play_sounds_in_background", 1
End sub
]]>
</script>


</muclient>
