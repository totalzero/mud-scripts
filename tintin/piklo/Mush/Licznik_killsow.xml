<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE muclient>
<!-- Saved on Monday, June 30, 2003, 12:20 PM -->
<!-- MuClient version 3.42 -->

<!-- Plugin "Licznik_killsow" generated by Plugin Wizard -->

<muclient>
<plugin
   name="Licznik_killsow"
   author="Lisev"
   id="314903b814a316fb7cfcb621"
   language="VBscript"
   save_state="y"
   date_written="2003-06-30 12:15:32"
   requires="3.42"
   version="1.0"
   >

</plugin>


<!--  Triggers  -->

<triggers>
  <trigger
   enabled="y"
   group="team_staty"
   keep_evaluating="y"
   match="^Zabil(es|as) (.*?)\.$"
   omit_from_output="y"
   regexp="y"
   repeat="y"
   script="add_kill"
   other_text_colour="black"
   other_back_colour="black"
  >
  </trigger>
  <trigger
   custom_colour="5"
   enabled="y"
   group="team_staty"
   keep_evaluating="y"
   make_bold="y"
   match="^([^ ]*) zabi(l|la) (.*?)\.$"
   regexp="y"
   script="add_team_kill"
   sequence="100"
   other_text_colour="black"
   other_back_colour="black"
  >
  </trigger>
</triggers>

<!--  Aliases  -->

<aliases>
  <alias
   script="kill"
   match="stats"
   enabled="y"
   group="team_staty"
   keep_evaluating="y"
   sequence="100"
  >
  </alias>
  <alias
   name="zerowanie"
   script="Onzeruj"
   match="zeruj"
   enabled="y"
   group="team_staty"
  >
  </alias>
  <alias
   script="help_script"
   match="^script_help$"
   enabled="y"
   group="script_help"
   omit_from_command_history="y"
   regexp="y"
   keep_evaluating="y"
   sequence="0"
  >
  </alias>
</aliases>

<!--  Timers  -->

<timers>
  <timer script="zeruj" second="1" group="team_staty" one_shot="y" enabled="n"></timer>
</timers>

<!--  Variables  -->

<!--  Script  -->


<script>
<![CDATA[

function delete_kills

  dim v
  dim varList

  varList = World.GetVariableList
  
  If Not IsEmpty (varList) Then
  
  For Each v In varList 
     if InStr(v, "kill_") then
      world.deletevariable(v)
     end if
  Next

  End If  



  world.setvariable "zabojstwa", 0
  world.setvariable "kill_all", 0


  world.note "Zeruje licznik"  

  delete_kill = vbFalse
end function

function get_color(i)
   dim y
   y = (i mod 12) + 1
   Select Case y
      case 1 get_color = "#006400"
      case 2 get_color = "#008000"
      case 3 get_color = "#9ACD32"
      case 4 get_color = "#FFFF00"
      case 5 get_color = "#FFD700"
      case 6 get_color = "#DAA520"
      case 7 get_color = "#FFA500"
      case 8 get_color = "#FF8C00"
      case 9 get_color = "#D2691E"
      case 10 get_color = "#FF4500"
      case 11 get_color = "#FF0000"
      case 12 get_color = "#B22222"
      case else get_color = "#800000"
  End select
end function

sub OnZeruj(strAliasName, strOutput, arrWildCards)
    delete_kills
end sub

sub add_kill(a,output, array)
  dim slowa
  slowa = Split(array(2), " ")
  rasa = slowa(ubound(slowa))
  if isnull (world.getvariable("kill_stat_" & rasa)) then
     world.setvariable "kill_stat_" & rasa, 1
  else
     world.setvariable "kill_stat_" & rasa, CInt(world.getvariable("kill_stat_" & rasa)) + 1
  end if
  if isnull (world.getvariable("kill_death_" & rasa)) then
     world.setvariable "kill_death_" & rasa, 1
  else
     world.setvariable "kill_death_" & rasa, CInt(world.getvariable("kill_death_" & rasa)) + 1
  end if

  if isnull (world.getvariable("kill_all")) then
     world.setvariable "kill_all", 1
  else
     world.setvariable "kill_all", CInt(world.getvariable("kill_all")) + 1
  end if

  world.setvariable "ekipawsio", world.getvariable("ekipawsio") + 1
  world.setvariable "zabojstwa", world.getvariable("zabojstwa") + 1
  world.note "Zabil" & array(1) & " " & array(2) &"."
 
end sub

sub add_team_kill(a, output, array)
  if isnull (world.getvariable("kill_team_" & array(1))) then
     world.setvariable "kill_team_" & array(1), 1
  else
     world.setvariable "kill_team_" & array(1), CInt(world.getvariable("kill_team_" & array(1))) + 1
  end if

  dim rasa
  rasa = Split(array(3), " ")

  if isnull (world.getvariable("kill_death_" & rasa(ubound(rasa)))) then
     world.setvariable "kill_death_" & rasa(ubound(rasa)), 1
  else
     world.setvariable "kill_death_" & rasa(ubound(rasa)), CInt(world.getvariable("kill_death_" & rasa(ubound(rasa)))) + 1
  end if
  
  if isempty (world.getvariable("kill_stat_" & rasa(ubound(rasa)))) then
     world.setvariable "kill_stat_" & rasa(ubound(rasa)), 0
  end if

  if isnull (world.getvariable("kill_all")) then
     world.setvariable "kill_all", 1
  else
     world.setvariable "kill_all", CInt(world.getvariable("kill_all")) + 1
  end if
  
  world.setvariable "ekipawsio", world.getvariable("ekipawsio") + 1

end sub


sub kill(a,b,c)
dim v, varList
dim rasa, rasa_all, rasa_str, procent
dim spacje,komunikat

varList = World.GetVariableList
dim aSortKill, aSortName

If Not IsEmpty (varList) Then
  For Each v In varList 
     if InStr(v, "kill_death_") then
      rasa_str = world.replace(v, "kill_death_", "", False)
      rasa_all = world.getvariable(v)
      aSortKill = aSortKill & "|" & rasa_all
      aSortName = aSortName & "|" & rasa_str
     end if
  Next
end if

dim i, temp, j , z
if len(aSortKill) = 0 then
   exit sub
end if
aSortKill = Split(right(aSortKill, len(aSortKill) - 1), "|")
aSortName = Split(right(aSortName, len(aSortName) - 1), "|")





for i = lbound(aSortKill) to (ubound(aSortKill) - 1)
 for j= (i + 1) to ubound(aSortKill)
    if CInt(aSortKill(i)) < CInt(aSortKill(j)) then
       temp = aSortKill(i)
       aSortKill(i) = aSortKill(j)
       aSortKill(j) = temp
       temp = aSortName(i)
       aSortName(i) = aSortName(j)
       aSortName(j) = temp
    end if
 next
next




world.note "Licznik zabitych"
for i = lbound(aSortName) to ubound(aSortName)
      rasa_str = aSortName(i)
      rasa_all = aSortKill(i)
      rasa = world.getvariable("kill_stat_" & rasa_str)
      procent = CInt(rasa * 100 / rasa_all)
      komunikat = world.replace(space(38 - len(rasa_str) - len(rasa) - len(rasa_all)) & rasa , " ", ".", True)
      world.note "Pokonales " & rasa_str & " " & rasa & "/" & rasa_all & " czyli " & procent & "%"
Next
  
dim all
if world.getvariable("kill_all") = 0 then
   all = 100
else
   all = CInt(world.getvariable("zabojstwa") * 100 / world.getvariable("kill_all"))
end if

dim razem
razem = 61 - len("*******************************Razem: " & world.getvariable("zabojstwa") & "/" & world.getvariable("kill_all") & " ( " & all & "% ) ")
razem = space(razem)
razem = world.replace(razem, " ", "*", True)

world.note "W sumie dobiles " & world.getvariable("zabojstwa") & "/" & world.getvariable("kill_all") & " czyli " & all & "%"

If Not IsEmpty (varList) Then
  dim suma
  suma = 0
  i = 0

  For Each v In varList 
     if InStr(v, "kill_team_") then
      i = i + 1
      rasa = world.replace(v, "kill_team_", "", False)
      spacje = 47 - len(rasa) - len(world.GetVariable(v))
      komunikat = world.replace(space(spacje) & world.GetVariable (v) , " ", ".", True)
      world.note rasa & " " & world.GetVariable (v)
      suma = suma + world.GetVariable (v)
     end if
  Next
if world.getvariable("kill_all") = 0 then
   all = 100
else
   all = CInt(suma * 100 / world.getvariable("kill_all"))
end if

razem = 60 - len("************************Razem: " & suma & "/" & world.getvariable("kill_all") & " ( " & all & "% )")
razem = space(razem)
razem = world.replace(razem, " ", "*", True)


world.note "Inni w sumie dobili " & suma & "/" & world.getvariable("kill_all") & " czyli " & all & "%"

End If

end sub

sub zeruj(timer)
    delete_kills
end sub

sub help_script(name, output, array)
    world.note "============================================================"
    world.note "|     Skrypt:                          Licznik killsow     |"
    world.note "|----------------------------------------------------------|"
    world.note "| Aliasy:                                                  |"
    world.note "|             stats         - statystyka zabic             |"
    world.note "|             zeruj         - zerowanie                    |"
    world.note "|==========================================================|"
    world.note "| Info:                                                    |"
    world.note "|      * pokazuje ladna statystyke zabic                   |"
    world.note "============================================================"
end sub


]]>
</script>


</muclient>